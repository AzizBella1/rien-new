<app-navbar *ngIf="idUser!=null "></app-navbar>

<div *ngIf="idUser!=null && is_admin!='ADMIN' " class="container mt-5">

   
    <div class="container">
        <h1>Mon Journal</h1>
            
        
    </div>
    <div *ngIf="hideAdd" class="container py-4"> 
        
        <button type="button" style="width: 150px;" (click)="add()" class="btn btn-outline-primary">new</button>
     
        
    </div>
    <div  *ngIf="error!=''" id="delete">
      <!--<img id="loading" src="../../../assets/loading.gif.gif" width="40px" height="40px">-->
      <div class="alert alert-danger" role="alert">
          <strong>{{error}}</strong>
      </div>
    </div>
  <br>

    <div *ngIf="!hideAdd" class="container mt-5">
  
        <form [formGroup]="todo">
            
            <div class="col-md-6 ml-md-auto">
                <div class="form-group m-8 row">
                    <label class="col-sm-4  col-form-label" for="reclamation"><b>Réclamation <small *ngIf="todo.get('reclamation')!.invalid" id="fileHelpId" style="color: red;" class="form-text">*</small></b></label>
                    <div class="col-sm-5">
                        <mat-form-field  >
                            <mat-select formControlName="reclamation" name="reclamation" placeholder="réclamation" >
                              <mat-option>
                                <ngx-mat-select-search  noEntriesFoundLabel="'Aucun Réclamation'" placeholderLabel="Cherche" (keyup)="fReclamation($event)"></ngx-mat-select-search>
                              </mat-option>
                              <mat-option *ngFor="let item of Reclamation" [value]="item.id">
                                {{item.ident}}
                              </mat-option>
                            </mat-select>
                        </mat-form-field>
                        
                    </div>
                  
                </div>
                
                <div class="form-group m-8 row">
                    <label class="col-sm-4  col-form-label" for=""><b>Durée <small *ngIf="todo.get('duree')!.invalid" id="fileHelpId" style="color: red;" class="form-text">*</small></b></label>
                    <div class="col-sm-5">
                        <mat-form-field >
                            <mat-select  formControlName="duree"  name="duree" placeholder="duree" >
                              
                              <mat-option *ngFor="let item of Duree" [value]="item.duree">
                                {{item.duree}}
                              </mat-option>
                            </mat-select>
                        </mat-form-field>
                        
                        
                    </div>
                    
                </div>
                <div class="form-group m-8 row py-2">
                    <label class="col-sm-4  col-form-label" for="description"><b>Description</b></label>
                    <div class="col-sm-5">
                        <textarea formControlName="description" class="form-control" placeholder="Description" name="description" id="" rows="3"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row">
                        <div class="col">
                            <button *ngIf="addButton" class="btn btn-success btn-block" (click)="addNew()" [disabled]="todo.invalid" type="submit">Ajouter</button>
                            <button *ngIf="!addButton" class="btn btn-warning btn-block" (click)="modTodo()" [disabled]="todo.invalid" type="submit">Modifier</button>
                        </div>
                        <div class="col">
                            <button class="btn btn-secondary btn-block" (click)="add()" type="submit">Annuler</button>
                        </div>
                    </div>
                    
                    
                </div> 
            </div>
        </form>
        <hr>
    </div>

    
    
    

   

    
</div>

<div *ngIf="idUser!=null && is_admin=='ADMIN' " class="container mt-5">

   
    <div class="container">
        <h1>User Journale</h1>
            
        <div class="col-sm-5">
            <mat-form-field  >
                <mat-select (selectionChange)="onChangeUser($event)" name="users" placeholder="Technicien" >
                  <mat-option>
                    <ngx-mat-select-search  noEntriesFoundLabel="'Aucun Technicien'" placeholderLabel="Cherche" (keyup)="fReclamation($event)"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option [value]="0">
                    Tous
                  </mat-option>
                  <mat-option *ngFor="let item of users" [value]="item.id">
                    {{item.name}}
                  </mat-option>
                </mat-select>
            </mat-form-field>
            
        </div>
    </div>
    
    <div  *ngIf="error!=''" id="delete">
      <!--<img id="loading" src="../../../assets/loading.gif.gif" width="40px" height="40px">-->
      <div class="alert alert-danger" role="alert">
          <strong>{{error}}</strong>
      </div>
    </div>
  <br>



    
    
    

   

    
</div>

<div  *ngIf=" is_admin!='ADMIN' " class="container" style="z-index: 1 !important;" name="cala" id='cala'></div>
<div  *ngIf=" is_admin=='ADMIN' " class="container" style="z-index: 1 !important;" name="cala" id='cala-admin'></div>

<div style="height: 30px;"></div>

